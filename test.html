<!DOCTYPE html><html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì½”ìŠ¤ëª¨ìŠ¤-KOSMORSE</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f0f0;
    }
    nav {
      display: flex;
      justify-content: center;
      background-color: #007acc;
    }
    nav button {
      flex: 1;
      padding: 15px;
      font-size: 4vw;
      background-color: #007acc;
      color: white;
      border: none;
      cursor: pointer;
    }
    .page {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    h1 {
      font-size: 6vw;
      color: #007acc;
      margin-top: 10px;
    }
    iframe {
      width: 100%;
      aspect-ratio: 16/9;
      border: none;
      margin: 20px 0;
    }
    p {
      font-size: 4vw;
      line-height: 1.6;
    }
    #output, #full-text {
      font-size: 5vw;
      margin: 5px 0;
      text-align: center;
      word-break: break-word;
      white-space: normal;
    }
    .press-bar {
      display: flex;
      justify-content: space-around;
      width: 90vw;
      margin: 10px 0;
    }
    .press-bar button {
      flex: 1;
      height: 50px;
      margin: 0 5px;
      border-radius: 10px;
      font-size: 4.5vw;
      background-color: #007acc;
      color: white;
      border: none;
    }
    .morse-grid, .favorites, .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      max-width: 95vw;
      margin: 5px 0;
    }
    .morse-item, .fav, .controls button {
      font-size: 4vw;
      padding: 6px 10px;
      border-radius: 8px;
      border: none;
      background-color: #fff;
      box-shadow: 0 0 2px rgba(0,0,0,0.2);
      user-select: none;
    }
    .controls button {
      background-color: #007acc;
      color: white;
    }
    .toggle-group {
      font-size: 4vw;
      margin: 5px 0;
      text-align: center;
    }
  </style>
</head>
<body>
  <nav>
    <button onclick="showPage('reason')">ë§Œë“  ì´ìœ </button>
    <button onclick="showPage('translator')">ëª¨ìŠ¤ë¶€í˜¸ ë²ˆì—­ê¸°</button>
  </nav>  <div id="reason" class="page active">
    <h1>ì½”ìŠ¤ëª¨ìŠ¤ - ë§Œë“  ì´ìœ </h1>
    <iframe src="https://www.youtube.com/embed/Oc_QMQ4QHcw" allowfullscreen></iframe>
    <p>
      ì´ ë²ˆì—­ê¸°ëŠ” ì†ê°€ë½ í•˜ë‚˜ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ìë¥¼ ìœ„í•´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ Tania Finlaysonì€ ëª¨ìŠ¤ë¶€í˜¸ë¥¼ ì´ìš©í•´ ì„¸ìƒê³¼ ì†Œí†µí•  ìˆ˜ ìˆì—ˆê³ , êµ¬ê¸€ Gboardì— ì˜ì–´ ëª¨ìŠ¤ ì…ë ¥ ì‹œìŠ¤í…œì´ íƒ‘ì¬ë˜ëŠ” ê³„ê¸°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.
    </p>
    <p>
      ë˜í•œ, ã€ì ìˆ˜ë³µê³¼ ë‚˜ë¹„ã€ë¼ëŠ” ì‹¤í™” ê¸°ë°˜ ì±…ê³¼ ì˜í™”ë„ í° ì˜ê°ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ ì‘í’ˆì€ ì „ì‹ ë§ˆë¹„ í™˜ìê°€ í•œìª½ ëˆˆêº¼í’€ë¡œë§Œ ì†Œí†µí•˜ë©° ì‚¶ì„ ê¸°ë¡í•œ ê°ë™ì ì¸ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.
      <br><br>
      ğŸ“˜ <a href="https://naver.me/F2nxPx8M" target="_blank">ì ìˆ˜ë³µê³¼ ë‚˜ë¹„ - ì±… ì†Œê°œ</a>
    </p>
    <p>
      ì €í¬ëŠ” ì´ì™€ ê°™ì€ ì‚¬ë¡€ë¥¼ í†µí•´, ëˆ„êµ¬ë‚˜ ìì‹ ì˜ ì˜ì§€ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤ê³  ëŠê¼ˆê³ , í•œê¸€ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ëª¨ìŠ¤ë¶€í˜¸ ë²ˆì—­ê¸°ë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
    </p>
  </div>  <div id="translator" class="page">
    <h1>ëª¨ìŠ¤ë¶€í˜¸ í•œê¸€ ë²ˆì—­ê¸°</h1>
    <div class="toggle-group">
      <label for="autoSpeak">ì…ë ¥ ì‹œ ìë™ ì½ê¸°</label>
      <input type="checkbox" id="autoSpeak" checked>
    </div>
    <div class="press-bar">
      <button id="dot-bar" aria-label="ì  ì…ë ¥ ë²„íŠ¼">ì§§ê²Œ (Â·)</button>
      <button id="dash-bar" aria-label="ì„  ì…ë ¥ ë²„íŠ¼">ê¸¸ê²Œ (âˆ’)</button>
    </div>
    <div id="output">ì¶œë ¥: </div>
    <div id="full-text">ì „ì²´ ë¬¸ì¥: </div>
    <div class="morse-grid" id="morseGrid"></div>
    <div class="controls">
      <button id="undo-button">ì§€ìš°ê¸°</button>
      <button id="speak-button">ì½ì–´ì£¼ê¸°</button>
      <button id="clear-button">ì „ì²´ ì§€ìš°ê¸°</button>
    </div>
    <div class="favorites">
      <button class="fav" data-msg="ë„ì™€ì£¼ì„¸ìš”">ë„ì™€ì£¼ì„¸ìš”</button>
      <button class="fav" data-msg="í™”ì¥ì‹¤">í™”ì¥ì‹¤</button>
      <button class="fav" data-msg="ë°°ê³ íŒŒìš”">ë°°ê³ íŒŒìš”</button>
      <button class="fav" data-msg="ê´œì°®ì•„ìš”">ê´œì°®ì•„ìš”</button>
      <button class="fav" data-msg="ê°ì‚¬í•©ë‹ˆë‹¤">ê°ì‚¬í•©ë‹ˆë‹¤</button>
    </div>
  </div>  <script>
    const morseMap = [
      { char: 'ã„±', code: '.-..' }, { char: 'ã„´', code: '..-.' }, { char: 'ã„·', code: '-..' },
      { char: 'ã„¹', code: '...-' }, { char: 'ã…', code: '--' }, { char: 'ã…‚', code: '.--' },
      { char: 'ã……', code: '--.' }, { char: 'ã…‡', code: '-.-' }, { char: 'ã…ˆ', code: '.--.' },
      { char: 'ã…Š', code: '--..' }, { char: 'ã…‹', code: '-..-' }, { char: 'ã…Œ', code: '--..' },
      { char: 'ã…', code: '---' }, { char: 'ã…', code: '.---' },
      { char: 'ã…', code: '.' }, { char: 'ã…‘', code: '..' }, { char: 'ã…“', code: '-' },
      { char: 'ã…•', code: '...' }, { char: 'ã…—', code: '.-' }, { char: 'ã…›', code: '-.' },
      { char: 'ã…œ', code: '....' }, { char: 'ã… ', code: '.-.' }, { char: 'ã…¡', code: '-..' },
      { char: 'ã…£', code: '..-' }
    ];

    const morseToHangul = Object.fromEntries(morseMap.map(m => [m.code, m.char]));

    const chosungList = ['ã„±','ã„´','ã„·','ã„¹','ã…','ã…‚','ã……','ã…‡','ã…ˆ','ã…Š','ã…‹','ã…Œ','ã…','ã…'];
    const jungsungList = ['ã…','ã…‘','ã…“','ã…•','ã…—','ã…›','ã…œ','ã… ','ã…¡','ã…£'];
    const jongsungList = ['','ã„±','ã„´','ã„·','ã„¹','ã…','ã…‚','ã……','ã…‡','ã…ˆ','ã…Š','ã…‹','ã…Œ','ã…','ã…'];

    const chosungMap = Object.fromEntries(chosungList.map((c, i) => [c, i]));
    const jungsungMap = Object.fromEntries(jungsungList.map((c, i) => [c, i]));
    const jongsungMap = Object.fromEntries(jongsungList.map((c, i) => [c, i]));

    let buffer = [];
    let sentence = "";
    let signal = "";

    function updateText() {
      document.getElementById("full-text").textContent = "ì „ì²´ ë¬¸ì¥: " + sentence;
    }

    function speak(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'ko-KR';
      window.speechSynthesis.speak(utter);
    }

    function flushBuffer() {
      if (buffer.length >= 2) {
        const c = buffer[0], v = buffer[1], f = buffer[2] || '';
        if (chosungMap[c] !== undefined && jungsungMap[v] !== undefined && jongsungMap[f] !== undefined) {
          const code = 0xAC00 + chosungMap[c] * 588 + jungsungMap[v] * 28 + jongsungMap[f];
          sentence += String.fromCharCode(code);
          buffer = [];
        }
      } else {
        sentence += buffer.join('');
        buffer = [];
      }
    }

    function handleCharInput(char) {
      if (chosungMap[char] !== undefined && buffer.length === 0) {
        buffer.push(char);
      } else if (jungsungMap[char] !== undefined && buffer.length === 1) {
        buffer.push(char);
      } else if (jongsungMap[char] !== undefined && buffer.length === 2) {
        buffer.push(char);
        flushBuffer();
      } else {
        flushBuffer();
        sentence += char;
      }
      updateText();
      if (document.getElementById("autoSpeak").checked) speak(char);
    }

    function handleSignal(sym) {
      signal += sym;
      document.getElementById("output").textContent = "ì…ë ¥ ì¤‘: " + signal;
      clearTimeout(window._morseTimeout);
      window._morseTimeout = setTimeout(() => {
        const result = morseToHangul[signal] || "?";
        document.getElementById("output").textContent = "ì¶œë ¥: " + result;
        if (result !== "?") handleCharInput(result);
        signal = "";
      }, 1000);
    }

    document.getElementById("dot-bar").addEventListener("click", () => handleSignal("."));
    document.getElementById("dash-bar").addEventListener("click", () => handleSignal("-"));

    document.getElementById("undo-button").addEventListener("click", () => {
      sentence = sentence.slice(0, -1);
      updateText();
    });

    document.getElementById("clear-button").addEventListener("click", () => {
      sentence = "";
      buffer = [];
      updateText();
    });

    document.getElementById("speak-button").addEventListener("click", () => {
      speak(sentence);
    });

    document.querySelectorAll(".fav").forEach(btn => {
      btn.addEventListener("click", () => {
        flushBuffer();
        sentence += btn.dataset.msg + " ";
        updateText();
        if (document.getElementById("autoSpeak").checked) speak(btn.dataset.msg);
      });
    });

    const morseGrid = document.getElementById("morseGrid");
    morseMap.forEach(({ char, code }) => {
      const btn = document.createElement("div");
      btn.className = "morse-item";
      btn.dataset.char = char;
      btn.innerText = `${char} (${code})`;
      btn.addEventListener("click", () => handleCharInput(char));
      morseGrid.appendChild(btn);
    });

    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }
  </script></body>
</html>